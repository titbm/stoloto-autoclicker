# Requirements Document

## Introduction

Данная спецификация направлена на исправление критических проблем пользовательского интерфейса и валидации данных в расширении Столото Автокликер. Основные проблемы включают некорректную обработку пользовательского ввода с пробелами, возможность запуска поиска на незагруженной странице и потерю контроля над активным поиском при закрытии popup.

## Requirements

### Requirement 1

**User Story:** Как пользователь, я хочу вводить числа через пробелы или запятые, чтобы не зависать в поиске из-за некорректного парсинга ввода

#### Acceptance Criteria

1. WHEN пользователь вводит числа через пробелы THEN система SHALL парсить их как отдельные числа
2. WHEN пользователь вводит числа через запятые THEN система SHALL парсить их как отдельные числа  
3. WHEN пользователь вводит числа через смешанные разделители (пробелы и запятые) THEN система SHALL корректно парсить все числа
4. WHEN пользователь пытается ввести символы кроме цифр, пробелов и запятых THEN система SHALL блокировать ввод недопустимых символов
5. WHEN пользователь вводит числа вне диапазона 1-90 THEN система SHALL показать ошибку валидации
6. WHEN пользователь вводит исключаемые числа через пробелы THEN система SHALL корректно парсить их как отдельные числа

### Requirement 2

**User Story:** Как пользователь, я хочу, чтобы кнопка "Запустить" была недоступна до полной загрузки страницы, чтобы избежать ошибок и системных сообщений

#### Acceptance Criteria

1. WHEN страница Столото еще не загружена полностью THEN кнопка "Запустить" SHALL быть заблокирована
2. WHEN страница Столото загружена полностью THEN кнопка "Запустить" SHALL стать доступной
3. WHEN происходит перезагрузка страницы во время работы THEN система SHALL корректно обработать изменение состояния загрузки

### Requirement 3

**User Story:** Как пользователь, я хочу иметь возможность остановить активный поиск после повторного открытия popup, чтобы контролировать процесс поиска

#### Acceptance Criteria

1. WHEN поиск активен и popup закрыт THEN состояние поиска SHALL сохраняться в фоновом режиме
2. WHEN popup открывается повторно во время активного поиска THEN интерфейс SHALL отображать кнопку "Остановить"
3. WHEN popup открывается повторно во время активного поиска THEN кнопка "Остановить" SHALL быть доступна и функциональна
4. WHEN пользователь нажимает "Остановить" в повторно открытом popup THEN поиск SHALL корректно останавливаться и страница SHALL перезагружаться
5. WHEN поиск остановлен через повторно открытый popup THEN состояние SHALL синхронизироваться с content script